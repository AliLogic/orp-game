Bodies = {}
Bodies[1] 	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Business_LPR"
Bodies[2] 	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Normal01_LPR"
Bodies[3] 	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Normal02_LPR"
Bodies[4] 	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Normal03_LPR"
Bodies[5] 	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Normal04_LPR"
Bodies[6]	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Pimp_LPR"
Bodies[7]	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Police_LPR"
Bodies[8]	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Scientist_LPR"
Bodies[9]	= "/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_SpecialAgent_LPR"
Bodies[10]	= "/Game/CharacterModels/Alien/Meshes/SK_Alien01"
Bodies[11]	= "/Game/CharacterModels/Alien/Meshes/SK_Alien02"
Bodies[12]	= "/Game/CharacterModels/Military/Meshes/SK_SpecialForces01"
Bodies[13]	= "/Game/CharacterModels/Military/Meshes/SK_SpecialForces02"
Bodies[14]	= "/Game/CharacterModels/Military/Meshes/SK_SpecialForces03"
Bodies[15]	= "/Game/CharacterModels/Military/Meshes/SK_SpecialForces04"
Bodies[16]	= "/Game/CharacterModels/Zombie01/Mesh/SK_Zombie01"
Bodies[17]	= "/Game/CharacterModels/Zombie01/Mesh/SK_Zombie02"

Masks = {}
Masks['000'] 	= nil
Masks['110']	= "/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoTorso"--"/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoClothes"
Masks['010']	= "/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoLegs"
Masks['001']	= nil
Masks['011']	= "/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoShoesLegs"
Masks['111']	= "/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoShoesLegsTorso"
Masks['100']	= "/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoTorso"
Masks['101']	= "/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoTorso"

Tops = {}
Tops[1]		= nil
Tops[2]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Knitted_Shirt_LPR"
Tops[3]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_FormalShirt_LPR"
Tops[4]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_FormalShirt2_LPR"
Tops[5]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[6]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_TShirt_Knitted2_LPR"
Tops[7]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_TShirt_Knitted_LPR"
Tops[8]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_TShirt_LPR"
Tops[9]		= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_CH3D_Prisoner_LPR"
Tops[10]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Police_Shirt-Long_LPR"
Tops[11]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Police_Shirt-Short_LPR"


Tops[12]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Set_SpecialAgent_LPR"
Tops[13]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Set_Pimp_LPR"
Tops[14]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Set_Pimp_Open_LPR"
Tops[15]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Set_Police_LPR"
Tops[16]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Set_Scientist_LPR"
Tops[17]	= "/Game/CharacterModels/Mafia/Meshes/SK_Mafia"

Tops[18]	= "/Game/CharacterModels/Clothing/Meshes/SK_Pullover"
Tops[19]	= "/Game/CharacterModels/Clothing/Meshes/SK_Pullover"
Tops[20]	= "/Game/CharacterModels/Clothing/Meshes/SK_TShirt01"
Tops[21]	= "/Game/CharacterModels/Clothing/Meshes/SK_Undershirt01"
Tops[22]	= "/Game/CharacterModels/Clothing/Meshes/SK_Undershirt01"
Tops[23]	= "/Game/CharacterModels/Clothing/Meshes/SK_ShirtCombo01"

Tops[24]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[25]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[26]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[27]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[28]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[29]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"
Tops[30]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Shirt_LPR"

Jackets = {}
Jackets[1]	= nil
Jackets[2] 	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_FormalJacket_LPR"
Jackets[3]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Labcoat_LPR"

Pants = {}
Pants[1]	= nil
Pants[2] 	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_CargoPants_LPR"
Pants[3]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_DenimPants_LPR"
Pants[4]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_FormalPants_LPR"
Pants[5]	= "/Game/CharacterModels/Clothing/Meshes/SK_Jeans01"
Pants[6]	= "/Game/CharacterModels/Clothing/Meshes/SK_Shorts01"

Shoes = {}
Shoes[1]	= nil
Shoes[2]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_BusinessShoes_LPR"
Shoes[3]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_NormalShoes_LPR"
Shoes[4]	= "/Game/CharacterModels/Clothing/Meshes/SK_Shoes01"

Extra = {}
Extra[1]	= nil
Extra[2]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_RingL_LPR"
Extra[3]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_RingR_LPR"
Extra[4]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_ScienceGlasses_LPR"
Extra[5]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_TacticalGlasses_LPR"
Extra[6]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_Tie_LPR"
Extra[7]	= "/Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Police_Hat_LPR"

Hair = {}
Hair[1]		= nil
Hair[2]		= "/Game/CharacterModels/SkeletalMesh/HZN_CH3D_Hair_Business_LP"
Hair[3]		= "/Game/CharacterModels/SkeletalMesh/HZN_CH3D_Hair_Scientist_LP"
Hair[4]		= "/Game/CharacterModels/SkeletalMesh/HZN_CH3D_Normal_Hair_01_LPR"
Hair[5]		= "/Game/CharacterModels/SkeletalMesh/HZN_CH3D_Police_Hair_LPR"
Hair[6]		= "/Game/CharacterModels/SkeletalMesh/HZN_CH3D_Normal_Hair_03_LPR"
Hair[7]		= "/Game/CharacterModels/SkeletalMesh/HZN_CH3D_Normal_Hair_02_LPR"

function SetPlayerShoes(playerid, shoeid)

	if shoeid == nil then
		shoeid = GetPlayerPropertyValue(playerid, "shoe_id")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Body")
	SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing2")
	SkeletalMeshComponent:SetSkeletalMesh(USkeletalMesh.LoadFromAsset(Shoes[shoeid]))
end

function SetPlayerSkinColor(playerid, r, g, b)

	if r == nil then
		r = GetPlayerPropertyValue(playerid, "skin_color_r")
		g = GetPlayerPropertyValue(playerid, "skin_color_g")
		b = GetPlayerPropertyValue(playerid, "skin_color_b")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Body")
	SkeletalMeshComponent:SetColorParameterOnMaterials("Skin Color", FLinearColor(r, g, b, 1.0))
end

function SetPlayerPupilSize(playerid, size)

	if size == nil then
		size = GetPlayerPropertyValue(playerid, "pupil_size")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Body")
	-- Make the pupil size big so it looks like the player is on drugs
	SkeletalMeshComponent:SetFloatParameterOnMaterials("PupilScale", size)
end

function SetPlayerHair(playerid, hairid)

	if hairid == nil then
		hairid = GetPlayerPropertyValue(playerid, "hair_id")
	end

	-- /Game/CharacterModels/SkeletalMesh/HZN_CH3D_Normal_Hair_03_LPR
	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing0")
	SkeletalMeshComponent:SetSkeletalMesh(USkeletalMesh.LoadFromAsset(Hair[hairid]))
end

function SetPlayerHairColor(playerid, r, g, b, a)

	if r == nil then
		r = GetPlayerPropertyValue(playerid, "hair_color_r")
		g = GetPlayerPropertyValue(playerid, "hair_color_g")
		b = GetPlayerPropertyValue(playerid, "hair_color_b")
		a = GetPlayerPropertyValue(playerid, "hair_color_a")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing0")
	-- Set reddish hair color.
	SkeletalMeshComponent:SetColorParameterOnMaterials("Hair Color", FLinearColor(r, g, b, a))
end

function SetPlayerClothColor(playerid, r, g, b, a)

	if r == nil then
		r = GetPlayerPropertyValue(playerid, "shirt_color_r")
		g = GetPlayerPropertyValue(playerid, "shirt_color_g")
		b = GetPlayerPropertyValue(playerid, "shirt_color_b")
		a = GetPlayerPropertyValue(playerid, "shirt_color_a")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing4")
	local DynamicMaterialInstance = SkeletalMeshComponent:CreateDynamicMaterialInstance(0)
	DynamicMaterialInstance:SetColorParameter("Clothing Color", FLinearColor(r, g, b, a))
	SkeletalMeshComponent:SetRelativeScale3D(FVector(1.0, 1.01, 1.0))
	SkeletalMeshComponent:SetRelativeRotation(FRotator(0.0, 0.0, 0.0))
	SkeletalMeshComponent:SetRelativeLocation(FVector(0.0, 0.0, 0.0))
end

function SetPlayerShirt(playerid, shirtid)

	if shirtid == nil then
		shirtid = GetPlayerPropertyValue(playerid, "shirt_id")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing0")
	SkeletalMeshComponent:SetSkeletalMesh(USkeletalMesh.LoadFromAsset(Tops[shirtid]))

	-- local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Body")
	-- SkeletalMeshComponent:SetSkeletalMesh(USkeletalMesh.LoadFromAsset("/Game/CharacterModels/SkeletalMesh/BodyMerged/HZN_CH3D_Normal03_LPR"))
	-- SkeletalMeshComponent:SetMaterial(3, UMaterialInterface.LoadFromAsset("/Game/CharacterModels/Materials/HZN_Materials/M_HZN_Body_NoShoesLegsTorso")) -- Mask to hide feet, legs and torso.

	-- SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing1")
	-- SkeletalMeshComponent:SetSkeletalMesh(USkeletalMesh.LoadFromAsset("/Game/CharacterModels/SkeletalMesh/Outfits/HZN_CH3D_Prisoner_LPR"))
end

function SetPlayerPants(playerid, pantid)

	if pantid == nil then
		pantid = GetPlayerPropertyValue(playerid, "pant_id")
	end

	-- /Game/CharacterModels/SkeletalMesh/Outfits/HZN_Outfit_Piece_CargoPants_LPR
	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing4")
	SkeletalMeshComponent:SetSkeletalMesh(USkeletalMesh.LoadFromAsset(Pants[pantid]))
	SkeletalMeshComponent:SetRelativeScale3D(FVector(1.0, 1.01, 1.0))
	SkeletalMeshComponent:SetRelativeRotation(FRotator(0.0, 0.0, 0.0))
	SkeletalMeshComponent:SetRelativeLocation(FVector(0.0, 0.0, 0.0))
end

function SetPlayerPantsColor(playerid, r, g, b, a)

	if r == nil then
		r = GetPlayerPropertyValue(playerid, "pant_color_r")
		g = GetPlayerPropertyValue(playerid, "pant_color_g")
		b = GetPlayerPropertyValue(playerid, "pant_color_b")
		a = GetPlayerPropertyValue(playerid, "pant_color_a")
	end

	local SkeletalMeshComponent = GetPlayerSkeletalMeshComponent(playerid, "Clothing4")
	local DynamicMaterialInstance = SkeletalMeshComponent:CreateDynamicMaterialInstance(0)
	DynamicMaterialInstance:SetColorParameter("Clothing Color", FLinearColor(r, g, b, a))
end

local function SetPlayerClothing(playerid)

	SetPlayerShoes(playerid)
	SetPlayerSkinColor(playerid)
	SetPlayerPupilSize(playerid)
	SetPlayerHair(playerid)
	SetPlayerHairColor(playerid)
	SetPlayerClothColor(playerid)
	SetPlayerShirt(playerid)
	SetPlayerPants(playerid)
	--SetPlayerPantsColor(playerid)
end
AddRemoteEvent("SetPlayerClothing", SetPlayerClothing)

AddEvent("OnPlayerStreamIn", function(player)
	SetPlayerClothing(player)
end)

AddEvent("OnPlayerNetworkUpdatePropertyValue", function(player, property, id)
	if IsValidPlayer(player) then
		SetPlayerClothing(player)
	end
end)